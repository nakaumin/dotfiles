<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>接続のハンドリング</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci8.examples-basic.html">基本的なクエリ</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci8.datatypes.html">ドライバでサポートされるデータ型</a></div>
 <div class="up"><a href="book.oci8.html">OCI8</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="oci8.connection" class="chapter">
 <h1>接続のハンドリング</h1>

 <p class="para">
  oci8 拡張モジュールは Oracle に接続するための 3
  つの異なる関数を提供しています。
  アプリケーションに最適な関数を使用するのはあなた次第です。
  また、このセクションにある情報は、
  インフォームド・チョイス (十分な説明を受けよく考えた上での選択)
  を行う助けになることを目的としています。
 </p>
 <p class="para">
  Oracle サーバへの接続は、完了まで要する時間という点から見ると、
  かなりコストのかかる操作です。<span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span> 関数は、
  異なるスクリプトリクエスト間で接続の再利用が可能な
  持続的キャッシュを使用します。
  これは、PHP プロセス (もしくは Apache の子プロセス)
  毎の接続に関するオーバーヘッドを一度のみ負うということを意味しています。
 </p>
 <p class="para">
  もしアプリケーションが信用された異なる Web ユーザー毎に
  Oracle に接続する場合、<span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span>
  による持続的キャッシュは、
  同時ユーザー数の増加と共に有効ではなくなるでしょう。
  これは、多くのアイドル状態の接続が維持されることが原因で、
  Oracle サーバ全体のパフォーマンスに不利な影響を与え始めるためです。
  もしアプリケーションがこの方法で構成されている場合、
  <a href="oci8.configuration.html#ini.oci8.max-persistent" class="link">oci8.max_persistent</a> や <a href="oci8.configuration.html#ini.oci8.persistent-timeout" class="link">oci8.persistent_timeout</a>
  (持続的接続のキャッシュサイズや生存期間の制御が可能になります)
  を使用してアプリケーションをチューニングする、もしくは代わりに
  <span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span> を使用することが推奨されます。
 </p>
 <p class="para">
  <span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span> と <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span>
  の両者とも接続キャッシュを使用します。もし、同一パラメータと共に
  <span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span> を複数回コールする場合、
  2 番目以降は既存の接続ハンドルを返します。<span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span>
  によって使用されるキャッシュは、スクリプト実行終了時、
  もしくは明示的に接続ハンドルを閉じた時にクリアされます。
  <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span> も同様の動作をしますが、
  キャッシュは独立して維持され、リクエスト間で残存します。
 </p>
 <p class="para">
  このキャッシュ機能は忘れてはならないほど重要です。
  それは、2 つのハンドルがトランザクション的に独立していない
  (実際には同じ接続なので、どのような種類の独立もありません)
  ためです。もしアプリケーションが 2
  つの別々でトランザクション的に独立した接続を必要とする場合、
  <span class="function"><a href="function.oci-new-connect.html" class="function">oci_new_connect()</a></span> を使用すべきです。
 </p>
 <p class="para">
  <span class="function"><a href="function.oci-new-connect.html" class="function">oci_new_connect()</a></span> は、他の既存の接続が存在したとしても
  常に Oracle サーバへの新規接続を生成します。
  特にアプリケーションの最も負荷が高い部分など、
  高トラフィックな Web アプリケーションに対しては
  <span class="function"><a href="function.oci-new-connect.html" class="function">oci_new_connect()</a></span> の使用を避けてください。
 </p>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci8.examples-basic.html">基本的なクエリ</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci8.datatypes.html">ドライバでサポートされるデータ型</a></div>
 <div class="up"><a href="book.oci8.html">OCI8</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>

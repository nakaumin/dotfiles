<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>実行時設定</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci8.installation.html">インストール手順</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci8.resources.html">リソース型</a></div>
 <div class="up"><a href="oci8.setup.html">インストール/設定</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="oci8.configuration" class="section">
    <h2 class="title">実行時設定</h2>
    <p class="simpara">
<var class="filename">php.ini</var> の設定により動作が変化します。
</p>
    <p class="para">
     <table class="doctable table">
      <caption><b>OCI8 設定オプション</b></caption>
      
       <thead valign="middle">
        <tr valign="middle">
         <th>名称</th>
         <th>デフォルト</th>
         <th>変更可否</th>
         <th>変更履歴</th>
        </tr>

       </thead>

       <tbody valign="middle" class="tbody">
        <tr valign="middle">
         <td align="left">oci8.connection_class</td>
         <td align="left">&quot;&quot;</td>
         <td align="left">PHP_INI_ALL</td>
         <td align="left">PHP 5.3 以降で使用可能 (PECL OCI8 1.3)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.default_prefetch</td>
         <td align="left">&quot;100&quot;</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.events</td>
         <td align="left">Off</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.3 以降で使用可能 (PECL OCI8 1.3)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.max_persistent</td>
         <td align="left">&quot;-1&quot;</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.old_oci_close_semantics</td>
         <td align="left">Off</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.persistent_timeout</td>
         <td align="left">&quot;-1&quot;</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.ping_interval</td>
         <td align="left">&quot;60&quot;</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.privileged_connect</td>
         <td align="left">Off</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

        <tr valign="middle">
         <td align="left">oci8.statement_cache_size</td>
         <td align="left">&quot;20&quot;</td>
         <td align="left">PHP_INI_SYSTEM</td>
         <td align="left">PHP 5.1.2 以降で使用可能 (PECL OCI8 1.1)</td>
        </tr>

       </tbody>
      
     </table>

    </p>

    <p class="para">以下に設定ディレクティブに関する
簡単な説明を示します。</p>

    <p class="para">
     <dl>

      <dt id="ini.oci8.connection.class">
       <span class="term">
        <i><tt class="parameter">oci8.connection_class</tt></i>
         <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 
       </span>
       <dd>

        <p class="para">
         This user defined text is used by Oracle 11g Database
         Resident Connection Pooling (DRCP) connections to
         sub-partition the connection pool.  It allows OCI8 persistent
         connections from an application to reuse database sessions
         from a previous PHP script, giving better scalability.  When
         an application uses a database pooled process previously used
         with a different connection class, the session settings such
         as the default Oracle date format are reset.  This prevents
         accidental sharing of information between different
         applications.
        </p>
        <p class="para">
         接続する前に、 <span class="function"><a href="function.ini-set.html" class="function">ini_set()</a></span> で実行時に
         値を設定できます。
        </p>
        <p class="para">
         To use DRCP, OCI8 must be linked with Oracle 11g libraries
         and the database must be Oracle 11g.  The connection pool
         must be enabled in the database,
         the <i>oci8.connection_class</i> should be set to
         the same string for all web servers running the same
         application, and the OCI8 connection string must specify to
         use a pooled server.
        </p>
       </dd>

      </dt>

      <dt id="ini.oci8.default-prefetch">
       <span class="term">
        <i><tt class="parameter">oci8.default_prefetch</tt></i>
         <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 
       </span>
       <dd>

        <p class="para">
         このオプションは、データベースからのデータに対する低レベルの
         要求が作成されたときにいつでも自動的にフェッチされ、キャッシュ
         されるデフォルトの追加行数を設定します。
         プリフェッチを無効にするには、値を <i>0</i> に
         設定します。
        </p>
        <p class="para">
         The prefetch value does not alter the number of rows that
         functions like <span class="function"><a href="function.oci-fetch-array.html" class="function">oci_fetch_array()</a></span> return to
         the user; the prefetching and caching of rows is handled
         internally in OCI8.
        </p>
        <p class="para">
         The value can be set per-statement
         with <span class="function"><a href="function.oci-set-prefetch.html" class="function">oci_set_prefetch()</a></span> prior to statement
         execution.
        </p>
        <p class="para">
         PHP 5.3 (PECL OCI8 1.3.4) で既定値が <i>10</i>
         から <i>100</i> に増やされました。
        </p>
        <p class="para">
         In PHP 5.3.2 (PECL OCI8 1.4) the minimum value settable was
         reduced from <i>1</i> to <i>0</i>,
         allowing prefetching to be turned off.
        </p>
        <blockquote><p><b class="note">注意</b>: 
         <span class="simpara">
          より大きなプリフェッチは、メモリ使用量の増加と引き替えに
          パフォーマンスの改善をもたらします。
          For queries that return
          large amounts of data, the performance benefit can be
          significant.
         </span>
        </p></blockquote>
       </dd>

      </dt>

      <dt id="ini.oci8.events">
       <span class="term">
        <i><tt class="parameter">oci8.events</tt></i>
         <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> 
       </span>
       <dd>

        <p class="para">
         Using <i>On</i> allows PHP to be notified of
         database Fast Application Notification (FAN) events.
        </p>
        <p class="para">
         Without FAN, when a database instance or machine node fails
         unexpectedly, PHP applications may be blocked waiting for a
         database response until a TCP timeout expires.  With FAN
         events, PHP applications are quickly notified of failures
         that affect their established database connections.  The OCI8
         extension will clean up unusable connections in the
         persistent connection cache.
        </p>
        <p class="para">
         When using <i>On</i>, the database must also be
         configured to post FAN events.
        </p>
        <p class="para">
         FAN support is available when OCI8 is linked with Oracle
         10gR2 (or later) libraries and connected to Oracle Database
         10gR2 (or later).
        </p>
       </dd>

      </dt>

      <dt id="ini.oci8.max-persistent">
       <span class="term">
        <i><tt class="parameter">oci8.max_persistent</tt></i>
         <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 
       </span>
       <dd>

        <p class="para">
         PHP プロセスあたりの永続的な OCI8 接続の最大値を指定します。
         このオプションを -1 に設定することは、制限なしを意味します。
        </p>
       </dd>

      </dt>

      <dt id="ini.oci8.old-oci-close-semantics">
       <span class="term">
        <i><tt class="parameter">oci8.old_oci_close_semantics</tt></i>
         <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> 
       </span>
       <dd>

        <p class="para">
         このオプションは <span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span>
         の動作を制御します。有効にすると、<span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span>
         は何も行いません。接続はスクリプトの終了まで閉じられません。
         これは後方互換性のためのみに存在しています。
         この設定を有効にする必要があると判明した場合、
         このオプションを有効にする代わりに、
         アプリケーションで <span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span> を調整することが
         <em class="emphasis">強く推奨</em>されます。
        </p>
       </dd>

      </dt>

      <dt id="ini.oci8.persistent-timeout">
       <span class="term">
        <i><tt class="parameter">oci8.persistent_timeout</tt></i>
         <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 
       </span>
       <dd>

        <p class="para">
         アイドル状態の永続的接続を PHP プロセスが開いたままにする最大秒数
         を指定します。
         このオプションを -1 に設定すると、 PHP 処理が終了するか、または
         接続が <span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span> で明示的に終了されるまで、
         アイドル状態の永続的接続は保持されます。
        </p>
        <blockquote><p><b class="note">注意</b>: 
         <span class="simpara">
          In PHP, the expiry of idle resources is not alarm-based. It
          occurs when PHP finishes processing a script and checks the
          last-used timestamp of resources.  Hence there is a paradox
          that idle connections can only be closed when there is some
          activity (though not necessarily OCI8 related) in the PHP
          process.  The introduction of Database Resident Connection
          Pooling (DRCP) in Oracle 11g resolves the memory and
          resource issues that <i>oci8.max_persistent</i>
          and <i>oci8.persistent_timeout</i> previously
          attempted to overcome.
         </span>
        </p></blockquote>
        <blockquote><p><b class="note">注意</b>: 
         <span class="simpara">
          PHP 5.3 (PECL OCI8 1.3) では、永続的接続は
          <span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span> で閉じることができます。
         </span>
        </p></blockquote>
       </dd>

      </dt>

      <dt id="ini.oci8.ping-interval">
       <span class="term">
        <i><tt class="parameter">oci8.ping_interval</tt></i>
         <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 
       </span>
       <dd>

        <p class="para">
          <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span> の間、ping
          を発行するまでに経過させる秒数を指定します。
          ping はデータベース接続が有効か確認します。
          0 に設定した場合、永続的接続は <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span> が
          呼び出される度に ping を発行します。
          ping を完全に無効にするためには、このオプションを -1 に設定します。
        </p>
        <blockquote><p><b class="note">注意</b>: 
         <span class="simpara">
          ping を無効にすることにより <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span>
          は最高の効率で処理できますが、ネットワークの脱落や
          PHP が接続した後に Oracle データベースがダウンした場合、
          その後のスクリプトで接続が使われるまで
          利用できない接続を PHP は検出できないでしょう。
          詳細な情報は <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span> を参照ください。
         </span>
        </p></blockquote>
       </dd>

      </dt>

      <dt id="ini.oci8.privileged-connect">
       <span class="term">
        <i><tt class="parameter">oci8.privileged_connect</tt></i>
         <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> 
       </span>
       <dd>

        <p class="para">
         このオプションにより特権のある外部の信用
         (<b><tt>OCI_SYSOPER</tt></b>, <b><tt>OCI_SYSDBA</tt></b>)
         を利用して接続できます。
        </p>
        <blockquote><p><b class="note">注意</b>: 
         <span class="simpara">
          Seting this <i>On</i> can allow scripts on web
          servers running with the appropriate OS user privileges to
          connect as privileged database users without requiring a
          database password.  This can be a security risk.
         </span>
        </p></blockquote>
       </dd>

      </dt>

      <dt id="ini.oci8.statement-cache-size">
       <span class="term">
        <i><tt class="parameter">oci8.statement_cache_size</tt></i>
         <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 
       </span>
       <dd>

        <p class="para">
         このオプションはステートメントキャッシュを有効にします。
         また、キャッシュするステートメントの数を指定します。
         ステートメントキャッシュを無効にする場合、このオプションを 0
         に設定してください。
        </p>
        <p class="para">
         Statement caching removes the need to transmit the statement
         text to the database and removes the need to transmit any
         meta data about the statement back to PHP.  This can
         significantly improve overall system performance in
         applications which reuse statements during the lifetime of a
         connection.  Some extra database &quot;cursors&quot; may be
         held open under the assumption that statements will be
         reused.
        </p>
        <p class="para">
         Set this value to the size of the working set of statements
         used by your application. Setting too small a value can cause
         statements to be flushed from the cache before they are
         reused.
        </p>
        <p class="para">
         このオプションは、永続的接続の利用の多くの場合に役立ちます。
        </p>
       </dd>

      </dt>

     </dl>

    </p>
   </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci8.installation.html">インストール手順</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci8.resources.html">リソース型</a></div>
 <div class="up"><a href="oci8.setup.html">インストール/設定</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
